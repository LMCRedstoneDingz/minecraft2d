<!DOCTYPE html>
<html>
  <head>
    <title>Chat Client</title>
    <script src="https://cdn.socket.io/socket.io-1.4.5.js"></script>
  </head>
  <body>
    <div id="messages">
      <textarea id="messagesbox" readonly cols=50 rows=8></textarea>
      <p><input type="text" id="message" disabled> <input type="button" id="sendbutton" value="Send" disabled></p>
    </div>
    <div id="signin">
      <p>Sign In</p>
      <p id="signinerror">Error: Unknown</p>
      <p>Username: <input type="text" id="signinusername" disabled></p>
      <p>Password: <input type="password" id="signinpassword" disabled></p>
      <input type="button" id="signinbutton" value="Sign in" disabled>
    </div>
    <div id="signup">
      <p>Sign Up</p>
      <p id="signuperror">Error: Unknown</p>
      <p>Username: <input type="text" id="signupusername" disabled></p>
      <p>Password: <input type="password" id="signuppassword" disabled></p>
      <p>Confirm Password: <input type="password" id="signupconfirmpassword" disabled></p>
      <input type="button" id="signupbutton" value="Sign up" disabled>
    </div>
    <div id="option">
      <input type="button" id="optionsigninbutton" value="Sign in" disabled>
      <input type="button" id="optionsignupbutton" value="Sign up" disabled>
    </div>
    <div id="connect">
      <p>IP: <input type="text" id="connectip" disabled></p>
      <p>Port: <input type="number" id="connectport" disabled></p>
      <input type="button" id="connectbutton" value="Connect" disabled>
    </div>
    <script>
      var messages = document.getElementById("messages"),
          signin = document.getElementById("signin"),
          signup = document.getElementById("signup"),
          option = document.getElementById("option"),
          connect = document.getElementById("connect");
      
      messages.style.display = "none";
      signin.style.display = "none";
      signup.style.display = "none";
      option.style.display = "none";
      connect.style.display = "block";
      
      var messagesbox = document.getElementById("messagesbox"),
          message = document.getElementById("message"),
          sendbutton = document.getElementById("sendbutton"),
          signinerror = document.getElementById("signinerror"),
          signinusername = document.getElementById("signinusername"),
          signinpassword = document.getElementById("signinpassword"),
          signinbutton = document.getElementById("signinbutton"),
          signuperror = document.getElementById("signuperror"),
          signupusername = document.getElementById("signupusername"),
          signuppassword = document.getElementById("signuppassword"),
          signupconfirmpassword = document.getElementById("signupconfirmpassword"),
          signupbutton = document.getElementById("signupbutton"),
          optionsigninbutton = document.getElementById("optionsigninbutton"),
          optionsignupbutton = document.getElementById("optionsignupbutton"),
          connectip = document.getElementById("connectip"),
          connectport = document.getElementById("connectport"),
          connectbutton = document.getElementById("connectbutton");
      
      var username = "",
          password = "";
      
      connectip.disabled = false;
      connectport.disabled = false;
      connectbutton.disabled = false;
      
      connectip.value = "24.140.54.120";
      connectport.value = 9001
      
      connectbutton.addEventListener("click", function() {
          connect.style.display = "none";
          option.style.display = "block";
          
          optionsigninbutton.disabled = false;
          optionsignupbutton.disabled = false;
      });
      
      optionsigninbutton.addEventListener("click", function() {
          optionsigninbutton.disabled = true;
          optionsignupbutton.disabled = true;
          
          signinusername.disabled = false;
          signinpassword.disabled = false;
          signinbutton.disabled = false;
          
          option.style.display = "none";
          signin.style.display = "block";
          signinerror.style.display = "none";
      });
      
      optionsignupbutton.addEventListener("click", function() {
          optionsigninbutton.disabled = true;
          optionsignupbutton.disabled = true;
          
          signupusername.disabled = false;
          signuppassword.disabled = false;
          signupconfirmpassword.disabled = false;
          signupbutton.disabled = false;
          
          option.style.display = "none";
          signup.style.display = "block";
          signuperror.style.display = "none";
      });
      
      signinbutton.addEventListener("click", function() {
        signinerror.style.display = "none";  
        if ((signinusername.value.length >= 3 && signinusername.value.length <= 16) && (signinpassword.value.length >= 3 && signinpassword.value.length <= 16)) {
              signinusername.disabled = true;
              signinpassword.disabled = true;
              signinbutton.disabled = true;
              
              username = signinusername.value;
              password = signinpassword.value;
              
              signin.style.display = "none";
              messages.style.display = "block";
              
              message.disabled = false;
              sendbutton.disabled = false;
          } else {
            if (signinusername.value.length < 3) {
                signinerror.innerText = "Error: Username must be at least 3 characters long.";
            } else if (signinusername.value.length > 16) {
                signinerror.innerText = "Error: Username must be at most 16 characters long.";
            } else if (signinpassword.value.length < 3) {
                signinerror.innerText = "Error: Password must be at least 3 characters long.";
            } else if (signinpassword.value.length > 16) {
                signinerror.innerText = "Error: Password must be at most 16 characters long.";
            }
            signinerror.style.display = "block";
          }
      });
      
      signupbutton.addEventListener("click", function() {
          signuperror.style.display = "none";
          if ((signupusername.value.length >= 3 && signupusername.value.length <= 16) && (signuppassword.value.length >= 3 && signuppassword.value.length <= 16) && signuppassword.value == signupconfirmpassword.value) {
              signupusername.disabled = true;
              signuppassword.disabled = true;
              signupconfirmpassword.disabled = true;
              signupbutton.disabled = true;
              
              username = signupusername.value;
              password = signuppassword.value;
              
              signup.style.display = "none";
              messages.style.display = "block";
              
              message.disabled = false;
              sendbutton.disabled = false;
          } else {
            if (signupusername.value.length < 3) {
                signuperror.innerText = "Error: Username must be at least 3 characters long.";
            } else if (signupusername.value.length > 16) {
                signuperror.innerText = "Error: Username must be at most 16 characters long.";
            } else if (signuppassword.value.length < 3) {
                signuperror.innerText = "Error: Password must be at least 3 characters long.";
            } else if (signuppassword.value.length > 16) {
                signuperror.innerText = "Error: Password must be at most 16 characters long.";
            } else if (signuppassword.value != signupconfirmpassword.value) {
                signuperror.innerText = "Error: Passwords don't match.";
            }
            signuperror.style.display = "block";
          }
      });
      
      message.addEventListener("keydown", function(event) {
          if (event.key == "Enter") {
            messagesbox.value += "\n"+username+": "+message.value;
            message.value = "";
          }
      });
      
      sendbutton.addEventListener("click", function() {
          messagesbox.value += username+": "+message.value+"\n";
          message.value = "";
      });
    </script>
  </body>
</html>
